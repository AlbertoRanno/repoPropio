<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Listado de Películas</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>

  <body>
    <figure>
      <img src="/img/logo-DH.png" alt="Logo Digital House" />
    </figure>
    <h1>LISTADO DE PELÍCULAS</h1>
    <br>
    <p>
        <a class="botonAgregar" href="/movies/add">Agregar una Pelicula</a>
        <a class="botonVolver" href="/">inicio</a>

    </p>
    <br>
    <ul>
      <% for( let i = 0; i < movies.length; i++ ) { %>
      <li>
        <a href="/movies/detail/<%= movies[i].id %>">
            <% if (movies[i].generos) { %> <!--Solo si la película tiene género.. Si no hay valor en esa columna da error-->
          <%= movies[i].title %> - <%= movies[i].generos.name %>
          <!--De la película en cuestión traigo los "generos" porque es el Alias de la asociación con esa otra tabla.
             Y de ahí puedo pedirle cualquier columna de esa tabla-->
             <% } %> 
             <ul>
               <% for( let j = 0; j < movies[i].actores.length; j++ ) { %> <!--hasta la cantidad de actores-->
               <li> <!-- Por cada uno de los actores (vinculo) de la película [i]-->
                 <%= movies[i].actores[j].first_name + " " + movies[i].actores[j].last_name %>
               </li>                 
               <% } %>
             </ul>
        </a>
      </li>
      <% } %>
    </ul>
  </body>
</html>
